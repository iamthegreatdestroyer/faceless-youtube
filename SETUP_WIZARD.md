# Setup Wizard Guide

The Faceless YouTube Automation Platform includes an interactive setup wizard that automatically detects your environment and guides you through configuration.

## Quick Start

### Linux / macOS

```bash
./setup.sh
```

### Windows

```batch
setup.bat
```

## What the Wizard Does

1. **Detects your environment** - OS, Python version, Docker availability, internet connectivity
2. **Asks about deployment mode** - Chooses how services are deployed
3. **Collects configuration** - Gathers database hosts, ports, and API credentials
4. **Validates settings** - Checks that services are reachable
5. **Generates files** - Creates `.env` and optional `docker-compose.override.yml`
6. **Provides next steps** - Shows how to start the application

## Deployment Modes

### Docker Full Stack (Recommended)

**Best for:** Most users, especially those new to the project

**What it does:**

- Spins up PostgreSQL, MongoDB, and Redis in Docker containers
- Generates `.env` file with Docker connection strings
- Creates `docker-compose.override.yml` for custom port mappings
- Handles all service initialization

**Requirements:**

- Docker and Docker Compose installed
- ~4GB RAM available for containers

**Example flow:**

```
? Select deployment mode: Docker Full Stack (recommended)
? Memory limit for containers (e.g., 2g): 2g
? CPU limit for containers (e.g., 2): 2
‚úì Configuration verified
‚úì Generated .env file
‚úì Setup wizard completed successfully!
```

### Local Services (Advanced)

**Best for:** Developers with existing database setup

**What it does:**

- Uses your local PostgreSQL, MongoDB, and Redis instances
- Allows custom host and port configuration
- Validates that services are reachable
- Generates `.env` with your local connection strings

**Requirements:**

- PostgreSQL 13+ installed and running
- MongoDB 4.4+ installed and running
- Redis 6+ installed and running
- Services accessible on localhost (or specified host)

**Example flow:**

```
? Select deployment mode: Local Services (advanced)
? PostgreSQL host: localhost
? PostgreSQL port: 5432
? MongoDB host: localhost
? MongoDB port: 27017
? Redis host: localhost
? Redis port: 6379

Detected services -> Postgres: yes, MongoDB: yes, Redis: yes
‚úì Configuration verified
‚úì Generated .env file
‚úì Setup wizard completed successfully!
```

### Hybrid Mode (Docker + Local)

**Best for:** Mixed deployments or specific service preferences

**What it does:**

- Uses Docker for some services, local instances for others
- Provides flexibility for complex setups
- Validates each service independently

**Example flow:**

```
? Select deployment mode: Hybrid (Docker + Local)
üîç Verifying configuration...
‚úì Configuration verified
‚úì Generated .env file
‚úì Setup wizard completed successfully!
```

### Development Mode

**Best for:** Quick testing, learning, or minimal overhead

**What it does:**

- Creates basic `.env` with default values
- Assumes you'll manually start services or use simplified setup
- Minimal validation

## Configuration Files Generated

### `.env` File

The wizard creates a `.env` file with all necessary environment variables:

```env
# Generated by Faceless YouTube Setup Wizard
ENVIRONMENT=development

# Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/faceless_youtube
MONGODB_URI=mongodb://root:password@localhost:27017/faceless_youtube
REDIS_URL=redis://localhost:6379/0

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
CORS_ORIGINS=http://localhost:3000

# Frontend Configuration
REACT_APP_API_URL=http://localhost:8000

# AI Configuration
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama2

# Logging
LOG_LEVEL=INFO
DEBUG=False
```

**Important:** The `.env` file is automatically backed up as `.env.bak` if one already exists.

### `docker-compose.override.yml` (Docker Mode Only)

For Docker deployments, the wizard creates an override file with custom port mappings:

```yaml
version: "3.9"
services:
  api:
    ports:
      - "8000:8000"
  dashboard:
    ports:
      - "3000:3000"
```

This allows you to customize port mappings without modifying the main `docker-compose.yml`.

## Troubleshooting

### Problem: "Python 3 not found"

**Windows:**

- Ensure Python is installed and added to PATH
- Run: `python --version` from command prompt

**Linux/macOS:**

- Install Python 3.8 or higher: `brew install python3` (macOS) or `sudo apt install python3` (Linux)
- Ensure `python3` is in PATH: `which python3`

### Problem: "Docker not found"

**Solution:** Install Docker Desktop from https://www.docker.com/products/docker-desktop

**Verify Docker is working:**

```bash
docker --version
docker run hello-world
```

### Problem: "Failed to connect to PostgreSQL"

**If using Docker mode:**

- Ensure Docker Desktop is running
- Check that ports aren't blocked: `netstat -an | grep 5432`
- Restart Docker and try again

**If using Local mode:**

- Verify PostgreSQL is installed: `psql --version`
- Verify it's running: `psql -U postgres -d postgres -c "SELECT 1"`
- Check it's on expected port: `netstat -an | grep 5432`
- Update host/port when prompted in wizard

### Problem: "Virtual environment not found"

**Windows:**

```batch
python -m venv venv
venv\Scripts\activate.bat
pip install -r requirements-dev.txt
setup.bat
```

**Linux/macOS:**

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements-dev.txt
./setup.sh
```

### Problem: "Permission denied" on setup.sh

**Solution:**

```bash
chmod +x setup.sh
./setup.sh
```

### Problem: "questionary module not found"

**Solution:** The wizard has a fallback for when questionary isn't available. It will use plain text prompts instead of interactive prompts, which works fine.

To install questionary anyway:

```bash
pip install questionary
```

### Problem: YouTube OAuth file not found

**Solution:** If you don't have YouTube OAuth credentials:

1. Skip the prompt (select "No" when asked)
2. Set up YouTube OAuth later by:
   - Creating OAuth credentials in Google Cloud Console
   - Saving the JSON file
   - Setting `YOUTUBE_OAUTH_FILE` environment variable

The wizard can proceed without YouTube credentials and you can configure them later.

### Problem: Connection timeouts in Docker mode

**Solutions:**

1. Ensure sufficient system resources (check memory/CPU in Docker Desktop settings)
2. Increase health check timeouts in docker-compose.yml
3. Check network connectivity: `docker network ls`
4. Rebuild images: `docker-compose build --no-cache`

## Example Workflows

### Quickest Setup (Docker Full Stack)

```bash
$ ./setup.sh
üöÄ Faceless YouTube Setup Wizard
================================

üéâ Welcome to Faceless YouTube Setup Wizard
   Platform: Linux
   Python: 3.11.0
   Docker: ‚úì
   Internet: ‚úì

? Select deployment mode: Docker Full Stack (recommended)
? Memory limit for containers (e.g., 2g): [2g]
? CPU limit for containers (e.g., 2): [2]
? Do you have YouTube OAuth credentials? [y/N]: n

üîç Verifying configuration...
‚úì Configuration verified
‚úì Generated .env file

üìö Next Steps:

1. Start Docker services:
   docker-compose up -d

2. Run the application:
   cd dashboard && npm run dev

3. Access services:
   API: http://localhost:8000
   Dashboard: http://localhost:3000

‚úÖ Setup wizard completed successfully!
```

Then start using the application:

```bash
# Terminal 1: Start Docker services
docker-compose up -d

# Terminal 2: Start the dashboard
cd dashboard && npm run dev

# Terminal 3: Start the API (if running locally)
uvicorn src.api.main:app --reload
```

### Advanced Setup (Local Services)

```bash
$ ./setup.sh
üöÄ Faceless YouTube Setup Wizard
================================

[... environment detection ...]

? Select deployment mode: Local Services (advanced)
? PostgreSQL host: localhost
? PostgreSQL port: 5432
? MongoDB host: localhost
? MongoDB port: 27017
? Redis host: localhost
? Redis port: 6379
? Do you have YouTube OAuth credentials? [y/N]: y
? Path to YouTube OAuth JSON file: /home/user/.youtube_oauth.json
‚úì YouTube OAuth file validated

üîç Verifying configuration...
‚ö†Ô∏è  All services detected successfully
‚úì Configuration verified
‚úì Generated .env file

üìö Next Steps:

1. Ensure local services are running:
   PostgreSQL, MongoDB, Redis, Ollama

2. Run the application:
   cd dashboard && npm run dev

3. In another terminal:
   uvicorn src.api.main:app --reload

‚úÖ Setup wizard completed successfully!
```

### Re-running the Wizard

If you need to reconfigure:

```bash
# Just re-run the script
./setup.sh  # Linux/macOS
setup.bat   # Windows

# The wizard will back up your existing .env and create a new one
# Old config saved as .env.bak
```

## What's Next?

After running the setup wizard:

1. **For Docker mode:** Start services with `docker-compose up -d`
2. **For Local mode:** Ensure your local services are running
3. **Start the application:** `cd dashboard && npm run dev`
4. **Access the dashboard:** http://localhost:3000
5. **Check API:** http://localhost:8000/docs (FastAPI Swagger UI)

## Advanced Configuration

For manual configuration or advanced options, see [Configuration Guide](./docs/CONFIGURATION.md).

## Getting Help

If you encounter issues:

1. Check the Troubleshooting section above
2. Review the generated `.env` file
3. Check Docker logs: `docker-compose logs`
4. Review application logs in `logs/` directory
5. Open an issue with error messages and platform info
