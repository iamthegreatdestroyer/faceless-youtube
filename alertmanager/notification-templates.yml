# Alertmanager Notification Templates{{ define "slack.default.text" -}}

# Note: These templates are loaded by alertmanager.yml{{ range .Alerts -}}

# For advanced template customization, see Alertmanager documentation*Alert:* {{ .Labels.alertname }} {{ if .Labels.severity }}({{ .Labels.severity }}){{ end }}

*Description:* {{ .Annotations.description }}

# Default Slack notification template*Details:*

define "slack.default.text":{{ range .Labels.SortedPairs -}}

  range .Alerts  â€¢ {{ .Name }}: {{ .Value }}

    Alert: {{ .Labels.alertname }} ({{ .Labels.severity }}){{ end }}

    Description: {{ .Annotations.description }}{{ end }}

    Instance: {{ .Labels.instance }}{{- end }}

    Started: {{ .StartsAt }}

  end{{ define "slack.default.title" -}}

{{ .Status | toUpper }}

# Default Email notification template  {{- end }}

define "email.default.subject":

  [{{ .Status | toUpper }}] {{ .GroupLabels.alertname }} - {{ .CommonLabels.instance }}{{ define "pagerduty.default.instances" -}}

{{ range . -}}

# Security alert template for email[{{ .Labels.severity | toUpper }}]

define "security_alert.html":AlertName: {{ .Labels.alertname }}

  SECURITY ALERT: {{ .GroupLabels.alertname }}Instance: {{ .Labels.instance }}

  Severity: {{ .GroupLabels.severity }}Description: {{ .Annotations.description }}

  {{ end }}

  Firing Alerts:{{- end }}

  range .Alerts.Firing

    - {{ .Labels.alertname }}: {{ .Annotations.description }}{{ define "email.default.subject" -}}

  end[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .GroupLabels.alertname }} for {{ .GroupLabels.job }}

  {{- end }}

  Recommended Actions:

  1. Review security logs immediately{{ define "email.default.html" -}}

  2. Check authentication and authorization<!DOCTYPE html>

  3. Verify SSL/TLS certificates<html>

  4. Contact security team if needed<head>

  <meta charset="UTF-8" />

# Operational alert template for email  <title>{{ .GroupLabels.alertname }}</title>

define "ops_alert.html":  <style>

  OPERATIONAL ALERT: {{ .GroupLabels.alertname }}    body { font-family: Verdana, Arial, sans-serif; }

  Severity: {{ .GroupLabels.severity }}    table { border-collapse: collapse; width: 100%; }

  Status: {{ .Status }}    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }

      th { background-color: #f2f2f2; }

  Details:    .firing { color: #d62728; }

  range .Alerts.Firing    .resolved { color: #2ca02c; }

    Instance: {{ .Labels.instance }}  </style>

    Description: {{ .Annotations.description }}</head>

  end<body>

    <h2 class="{{ .Status }}">

  Recommended Actions:    {{ .Status | toUpper }}: {{ .GroupLabels.alertname }}

  1. Review system logs  </h2>

  2. Check service health

  3. Verify resource availability  <p><strong>Alert Group:</strong> {{ .GroupLabels.alertname }}</p>

  4. Contact ops team  <p><strong>Status:</strong> {{ .Status }}</p>

  <p><strong>Severity:</strong> {{ .GroupLabels.severity }}</p>
  <p><strong>Category:</strong> {{ .GroupLabels.category }}</p>

  {{ if .Alerts.Firing }}
  <h3 class="firing">ðŸ”¥ Firing Alerts ({{ .Alerts.Firing | len }})</h3>
  <table>
    <tr>
      <th>Alert Name</th>
      <th>Instance</th>
      <th>Description</th>
      <th>Value</th>
      <th>Started</th>
    </tr>
    {{ range .Alerts.Firing }}
    <tr>
      <td><strong>{{ .Labels.alertname }}</strong></td>
      <td>{{ .Labels.instance }}</td>
      <td>{{ .Annotations.description }}</td>
      <td>{{ .Annotations.value }}</td>
      <td>{{ .StartsAt.Format "2006-01-02 15:04:05" }}</td>
    </tr>
    {{ end }}
  </table>
  {{ end }}

  {{ if .Alerts.Resolved }}
  <h3 class="resolved">âœ… Resolved Alerts ({{ .Alerts.Resolved | len }})</h3>
  <table>
    <tr>
      <th>Alert Name</th>
      <th>Instance</th>
      <th>Description</th>
      <th>Resolved</th>
    </tr>
    {{ range .Alerts.Resolved }}
    <tr>
      <td><strong>{{ .Labels.alertname }}</strong></td>
      <td>{{ .Labels.instance }}</td>
      <td>{{ .Annotations.description }}</td>
      <td>{{ .EndsAt.Format "2006-01-02 15:04:05" }}</td>
    </tr>
    {{ end }}
  </table>
  {{ end }}

  <hr>
  <small>Alert Manager - Faceless YouTube Staging Environment</small>
</body>
</html>
{{- end }}

{{ define "security_alert.html" -}}
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>ðŸš¨ Security Alert</title>
  <style>
    body {
      font-family: Verdana, Arial, sans-serif;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #fff;
      padding: 20px;
      border-radius: 5px;
      border-left: 5px solid #d62728;
    }
    h1 { color: #d62728; }
    table { border-collapse: collapse; width: 100%; margin: 20px 0; }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
    th { background-color: #f2f2f2; }
    .details { background-color: #fffacd; padding: 10px; margin: 10px 0; }
    .actions {
      background-color: #e8f4f8;
      padding: 10px;
      margin: 10px 0;
      border-left: 3px solid #0288d1;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸš¨ SECURITY ALERT</h1>

    <div class="details">
      <p><strong>Alert:</strong> {{ .GroupLabels.alertname }}</p>
      <p><strong>Severity:</strong> {{ .GroupLabels.severity }}</p>
      <p><strong>Environment:</strong> Staging</p>
      <p><strong>Time:</strong> {{ .Alerts.Firing | first | .StartsAt.Format "2006-01-02 15:04:05" }}</p>
    </div>

    <h3>Alert Details</h3>
    <table>
      <tr>
        <th>Component</th>
        <th>Instance</th>
        <th>Description</th>
        <th>Value</th>
      </tr>
      {{ range .Alerts.Firing }}
      <tr>
        <td>{{ .Labels.alertname }}</td>
        <td>{{ .Labels.instance }}</td>
        <td>{{ .Annotations.description }}</td>
        <td>{{ .Annotations.value }}</td>
      </tr>
      {{ end }}
    </table>

    <div class="actions">
      <h4>âš¡ Recommended Actions:</h4>
      <ul>
        <li>Review security logs immediately</li>
        <li>Check authentication and authorization</li>
        <li>Verify SSL/TLS certificates</li>
        <li>Review database audit logs</li>
        <li>Contact security team if malicious activity suspected</li>
      </ul>
    </div>

    <hr>
    <p><small>Security Alert - Faceless YouTube Staging Environment</small></p>
  </div>
</body>
</html>
{{- end }}
